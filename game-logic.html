<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Space Dodger 3D</title>
  <style>
    body { margin:0; overflow:hidden; background:black; font-family:Arial, sans-serif; }
    #hud {
      position: absolute; top: 10px; left: 10px;
      background: rgba(255,255,255,0.1); border-radius: 15px;
      padding: 15px; color: white; font-size: 14px;
    }
    #fuelMeter {
      display: flex; margin-top: 5px;
    }
    .fuelSection {
      width: 8px; height: 15px; border-right: 1px solid black;
    }
    #icons {
      position: absolute; top: 10px; right: 10px;
      display: flex; gap: 10px;
    }
    .icon {
      width: 32px; height: 32px; background: white; border-radius: 50%;
      display:flex; align-items:center; justify-content:center; cursor:pointer;
    }
    #landing {
      position:absolute; top:0; left:0; width:100%; height:100%;
      background:black; color:white; display:flex; flex-direction:column;
      align-items:center; justify-content:center; z-index:10;
    }
    #hallOfFame {
      position:absolute; top:0; left:0; width:100%; height:100%;
      background:rgba(0,0,0,0.9); color:white; display:none;
      flex-direction:column; align-items:center; justify-content:center; z-index:20;
    }
    table { border-collapse: collapse; margin-top:20px; }
    th { font-weight:bold; font-size:18px; }
    td, th { padding:8px 12px; }
    .gold { color:gold; }
    .silver { color:silver; }
    .bronze { color:#cd7f32; }
    #gameOver {
      position:absolute; top:40%; left:50%; transform:translate(-50%,-50%);
      font-size:48px; color:red; font-weight:bold; display:none;
    }
  </style>
</head>
<body>
  <div id="hud">
    <div id="username">User: Guest</div>
    <div id="level">Level: 1</div>
    <div id="score">Score: 0</div>
    <div id="lives">Lives: ‚ù§Ô∏è‚ù§Ô∏è‚ù§Ô∏è</div>
    <div id="fuelMeter"></div>
  </div>
  <div id="icons">
    <div class="icon" id="playPause">‚ñ∂Ô∏è</div>
    <div class="icon" id="instructions">‚ÑπÔ∏è</div>
    <div class="icon" id="sound">üîä</div>
    <div class="icon" id="trophy">üèÜ</div>
    <div class="icon" id="globe">üåê</div>
  </div>
  <div id="landing">
    <h1>üöÄ Space Dodger 3D üöÄ</h1>
    <button id="launchBtn">Launch Space Dodger</button>
    <select id="levelSelect">
      <option value="1">LEVEL=1</option>
      <option value="2">LEVEL=2</option>
      <option value="3">LEVEL=3</option>
      <!-- add up to 16 -->
    </select>
    <button id="hallBtn">Hall of Fame</button>
  </div>
  <div id="hallOfFame">
    <h2>üèÜ Hall of Fame üèÜ</h2>
    <table id="hallTable">
      <tr class="gold"><th>Rank</th><th>Score</th></tr>
      <tr class="silver"><td>2</td><td>90</td></tr>
      <tr class="bronze"><td>3</td><td>80</td></tr>
    </table>
    <button id="closeHall">Close</button>
  </div>
  <div id="gameOver">GAME OVER</div>

  <script src="https://cdn.jsdelivr.net/npm/three@0.152.2/build/three.min.js"></script>
  <script>
    let scene, camera, renderer, rocket, asteroids=[], stars=[];
    let score=0, level=1, lives=3, fuel=100, playing=false;
    let keys={};

    init();
    function init(){
      scene=new THREE.Scene();
      camera=new THREE.PerspectiveCamera(75,window.innerWidth/window.innerHeight,0.1,1000);
      renderer=new THREE.WebGLRenderer();
      renderer.setSize(window.innerWidth,window.innerHeight);
      document.body.appendChild(renderer.domElement);

      // Rocket
      let rocketGeo=new THREE.ConeGeometry(1,3,32);
      let rocketMat=new THREE.MeshPhongMaterial({color:0x000080, shininess:100});
      rocket=new THREE.Mesh(rocketGeo,rocketMat);
      rocket.position.y=-5;
      scene.add(rocket);

      // Lights
      let light=new THREE.PointLight(0xffffff,1,100);
      light.position.set(10,10,10);
      scene.add(light);

      camera.position.z=10;

      // Fuel meter
      let fm=document.getElementById("fuelMeter");
      for(let i=0;i<25;i++){
        let sec=document.createElement("div");
        sec.className="fuelSection";
        sec.style.background="green";
        fm.appendChild(sec);
      }

      animate();
    }

    function animate(){
      requestAnimationFrame(animate);
      if(playing){
        updateObjects();
        checkCollisions();
        updateHUD();
      }
      renderer.render(scene,camera);
    }

    function spawnAsteroid(){
      let size=Math.random()*1.5+0.5;
      let geo=new THREE.SphereGeometry(size,16,16);
      let mat=new THREE.MeshPhongMaterial({color:0xff0000});
      let asteroid=new THREE.Mesh(geo,mat);
      asteroid.position.set((Math.random()-0.5)*10,10,0);
      asteroid.userData={size:size,hits:0};
      scene.add(asteroid);
      asteroids.push(asteroid);
    }

    function spawnStar(){
      let geo=new THREE.SphereGeometry(0.3,8,8);
      let mat=new THREE.MeshPhongMaterial({color:0xffff00});
      let star=new THREE.Mesh(geo,mat);
      star.position.set((Math.random()-0.5)*10,10,0);
      scene.add(star);
      stars.push(star);
    }

    function updateObjects(){
      if(Math.random()<0.02) spawnAsteroid();
      if(Math.random()<0.01) spawnStar();
      asteroids.forEach(a=>{a.position.y-=0.05*level;});
      stars.forEach(s=>{s.position.y-=0.05*level;});
    }

    function checkCollisions(){
      asteroids.forEach((a,i)=>{
        if(Math.abs(a.position.x-rocket.position.x)<1 && Math.abs(a.position.y-rocket.position.y)<1){
          lives--; fuel-=10;
          scene.remove(a); asteroids.splice(i,1);
          if(lives<=0 || fuel<=0) endGame();
        }
      });
      stars.forEach((s,i)=>{
        if(Math.abs(s.position.x-rocket.position.x)<1 && Math.abs(s.position.y-rocket.position.y)<1){
          score+=10; fuel+=5;
          scene.remove(s); stars.splice(i,1);
        }
      });
    }

    function updateHUD(){
      document.getElementById("score").innerText="Score: "+score;
      document.getElementById("level").innerText="Level: "+level;
      document.getElementById("lives").innerText="Lives: "+"‚ù§Ô∏è".repeat(lives);
      let fm=document.getElementById("fuelMeter").children;
      for(let i=0;i<25;i++){
        let pct=fuel/100*25;
        fm[i].style.background=i<pct?(fuel>67?"green":fuel>34?"orange":"red"):"transparent";
      }
    }

    function endGame(){
      playing=false;
      document.getElementById("gameOver").style.display="block";
      score=0; level=1; lives=3; fuel=100;
    }

    // Controls
    document.addEventListener("keydown",e=>{keys[e.key]=true;});
    document.addEventListener("keyup",e=>{keys[e.key]=false;});
    setInterval(()=>{
      if(keys["ArrowLeft"]) rocket.position.x-=0.2;
      if(keys["ArrowRight"]) rocket.position.x+=0.2;
    },
